var SVGAnim=function(root){function updateMaskContent(t,e){var i=e.maskElement,a=t.getChildById(e.id);i.clear(),clone=a.el.clone(),clone.attr({visibility:"visible"}),i.append(clone)}function SVGAnim(t,e,i,a,r){function n(){var e,i,r;for(void 0!==d.rootAnimator&&d.rootAnimator.dispose(),d.linkage={},r=t.DOMDocument.Timeline.length-1;r>-1;r-=1){if("undefined"==typeof t.DOMDocument.Timeline[r].linkageName){e=r;break}d.linkage[t.DOMDocument.Timeline[r].linkageName]=t.DOMDocument.Timeline[r]}i=d.resourceManager.m_data.DOMDocument.Timeline[e],d.mc=new MovieClip(i,d.s,d.resourceManager,id),c=setTimeout(o,1e3/a)}function o(){d.mc._animate(),clearTimeout(c),m&&(c=setTimeout(o,1e3/a))}function s(t){switch(t.keyCode){case 39:o();break;case 32:d.mc.playing?d.stop():d.play()}}function l(){function t(e,a){var r,n;for(n=0;n<a.children.length;n+=1){for(r=0;e>r;r+=1)i+="-";i+=a.children[n].id+":"+a.children[n].children.length,a.children[n].isMask&&(i+=" (MASK till:"+a.children[n].maskTill+")"),a.children[n].isMasked&&(i+=" (masked by: "+a.children[n].mask+")"),i+="<br/>",t(e+5,a.children[n])}}var e=document.getElementById("debug"),i="";e||(e=document.createElement("div"),e.id="debug",e.style.position="absolute",e.style.top="0",e.style.right="0",e.style.backgroundColor="black",e.style.color="white",e.style.padding="1em",document.body.appendChild(e)),i+=d.mc.id+"<br/>",i+=d.mc.m_currentFrameNo+"<br/>",t(2,d.mc),e.innerHTML=i}var m,h,c,p,d=this,u="#008460";d.version="1.2.1",p="Snap.svg Animator v"+d.version,console.log("%c"+p,"color:"+u+";font-weight:bold;"),r=r||{},a=a||24,e=e||100,i=i||100,h=r.autoplay||!0,m=h,d.debug=!1,SVGAnim.prototype.toString=function(){return p},d.MovieClip=MovieClip,d.resourceManager=new ResourceManager(t),d.s=new Snap(e),id=d.s.id,n(d.s),d.debug&&(m=!1,window.addEventListener("keydown",s)),this.play=function(){d.mc.play(),m=!0},this.stop=function(){d.mc.stop(),m=!1},this.setLoop=function(t){d.mc.loops=t},d.debug&&setInterval(l,100),h?d.play():o()}SVGAnim.version="0.0.2";var GarbagePool=function(){this.EMPTY_POOL=[],this.REF_POOL=[]};GarbagePool.prototype.addEmpty=function(t){this.EMPTY_POOL.push(t)},GarbagePool.prototype.addRef=function(t,e){var i,a;for(i=0;i<this.REF_POOL.length;i+=1)if(this.REF_POOL[i].el.id==t.id){for(a=0;a<e.length;a+=1)this.REF_POOL[i].refs.push(e[a]);return}this.REF_POOL.push({el:t,refs:e})},GarbagePool.prototype.purge=function(){this.purgeEmptyPool(),this.purgeRefPool()},GarbagePool.prototype.purgeEmptyPool=function(){var t,e;for(t=this.EMPTY_POOL.length-1;t>-1;t-=1)e=this.EMPTY_POOL[t],0===e.children().length&&(e.remove(),this.EMPTY_POOL.splice(t,1))},GarbagePool.prototype.purgeRefPool=function(){var t,e,i,a;for(t=this.REF_POOL.length-1;t>-1;t-=1)for(a=this.REF_POOL[t],i=0,e=0;e<a.refs.length;e+=1)a.refs[e].removed&&(i+=1),i==a.refs.length&&(a.el.remove(),this.REF_POOL.splice(t,1))};var GP=new GarbagePool,Bitmap=function(t,e,i,a,r,n){var o=this,s=t.el;this.create=function(){var l,m;o.el=t.el.g(),o.id=a,o.el.attr({"class":"shape",token:o.id}),o.children=[],o.isMask=!1,o.isMasked=!1,o.mask=null,o.maskTill=null;for(var h=0;h<e.m_data.DOMDocument.Bitmaps.length;h++)if(e.m_data.DOMDocument.Bitmaps[h].charid==i){var c=e.m_data.DOMDocument.Bitmaps[h].bitmapPath,p=t.el.paper.image(c);o.el.add(p)}l=n.split(","),m=new Snap.Matrix(l[0],l[1],l[2],l[3],l[4],l[5]),o.el.transform(m),r&&0!==parseInt(r)?(afterMC=t.getChildById(parseInt(r)),afterMC.isMasked?afterMC.el.parent().before(o.el):afterMC.el.before(o.el)):s.add(o.el)},this.create()},Text=function(t,e,i,a,r,n,o){var s=this,l=t.el;this.create=function(){var o,m,h;for(s.el=t.el.g(),s.id=a,s.el.attr({"class":"text",token:s.id}),s.children=[],s.isMask=!1,s.isMasked=!1,s.mask=null,s.maskTill=null,o=0;o<e.m_data.DOMDocument.Text.length;o++)e.m_data.DOMDocument.Text[o].charid==i&&s.addText(e.m_data.DOMDocument.Text[o]);m=n.split(","),h=new Snap.Matrix(m[0],m[1],m[2],m[3],m[4],m[5]),s.el.transform(h),r&&0!==parseInt(r)?(afterMC=t.getChildById(parseInt(r)),afterMC.isMasked?afterMC.el.parent().before(s.el):afterMC.el.before(s.el)):l.add(s.el)},this.addText=function(t){var e,i,a,r,n,l,m,h,c,p,d,u,f;i=s.el.g(),u=o?o.split(","):[0,0,200,100],n=t.behaviour.lineMode,c=t.paras[0].alignment,d="single"==n?"central":"auto",l=t.paras[0].textRun[0].style.fontSize,m=t.paras[0].textRun[0].style.fontName,h=t.paras[0].textRun[0].style.fontColor,letterSpacing=t.paras[0].textRun[0].style.letterSpacing,"left"==c?p="start":"center"==c?p="middle":"right"==c&&(p="end"),f={"text-anchor":p,"dominant-baseline":d,"font-family":m,"font-size":l,"letter-spacing":letterSpacing,fill:h},"false"!==t.behaviour.isBorderDrawn&&(textRect=i.rect(u[0],u[1],u[2],u[3]),textRect.attr({stroke:"black",fill:"transparent"})),"single"==n?(e=i.text(0,0,t.txt),r=parseFloat(u[1])+parseFloat(u[3])/2):(e=s.multiLine(i,t,u,f),r=parseFloat(u[1])-2*parseFloat(t.paras[0].linespacing)),a="left"==c?parseFloat(u[0]):parseFloat(u[0])+parseFloat(u[2])/2,e.attr(f),e.transform("translate("+a+","+r+")")},this.multiLine=function(t,e,i,a){for(var r,n,o,s,l=(e.txt,[]),m="",h=parseFloat(i[2]),c=0;c>-1;)m+=e.txt.charAt(c),n=t.text(0,0,m),n.attr(a),s=n.getBBox(),s.w>h?(newIndex=m.lastIndexOf(" "),r=m.slice(0,newIndex),l.push(r),c=c-(m.length-r.length)+2,m=""):c+=1,c>=e.txt.length&&(r=m.slice(0,newIndex),l.push(r),c=-1),n.remove();return text=t.text(0,0,l),o=text.selectAll("tspan"),o.attr({x:0,dy:s.h+parseFloat(e.paras[0].linespacing)}),text},this.create()},Shape=function(t,e,i,a,r,n){function o(t){var e=/^#?([a-f\d]{2})([a-f\d]{2})([a-f\d]{2})$/i.exec(t);return e?{r:parseInt(e[1],16),g:parseInt(e[2],16),b:parseInt(e[3],16)}:null}function s(t,e,i){var a,r;return a=l.el.image(t),r=a.pattern(0,0,e.width,e.height),r.attr({x:i.e,y:i.f}),r}var l=this,m=t.el;this.create=function(){var o,s,h,c;for(l.el=t.el.g(),l.id=a,l.el.attr({"class":"shape",token:l.id}),l.children=[],l.isMask=!1,l.isMasked=!1,l.mask=null,l.maskTill=null,o=0;o<e.m_data.DOMDocument.Shape.length;o++)if(e.m_data.DOMDocument.Shape[o].charid==i)for(s=0;s<e.m_data.DOMDocument.Shape[o].path.length;s++)l.addPath(o,s);h=n.split(","),c=new Snap.Matrix(h[0],h[1],h[2],h[3],h[4],h[5]),l.el.transform(c),r&&0!==parseInt(r)?(afterMC=t.getChildById(parseInt(r)),afterMC.isMasked?afterMC.el.parent().before(l.el):afterMC.el.before(l.el)):m.add(l.el)},this.addPath=function(t,i){var a;shape=l.el.path(),resourcePath=e.m_data.DOMDocument.Shape[t].path[i],a=resourcePath.d,shape.attr({fill:"transparent"}),shape.attr({d:a}),"Fill"==resourcePath.pathType?this.addFill(shape,resourcePath):"Stroke"==resourcePath.pathType&&this.addStroke(shape,resourcePath)},this.getFillColor=function(){var t,e,i,a,r,n;return t=resourcePath.color,e=parseInt(t.substring(1,3),16),i=parseInt(t.substring(3,5),16),a=parseInt(t.substring(5,7),16),r=resourcePath.colorOpacity,n="rgba("+e+","+i+","+a+","+r+")"},this.getFillImage=function(e){var i,a,r,n,o=0;return i=e.patternTransform.split(","),o=0,a=new Snap.Matrix(i[o],i[o+1],i[o+1],i[o+3],i[o+4],i[o+5]),r=e.bitmapPath,n=t.el.paper.select("defs pattern image"),n&&n.attr("href")==r?fillImage=n.parent():fillImage=s(r,e,a),fillImage},this.getFillGradient=function(e,i,a){var r,n,s,l,m,h,c,p,d,u;for("linear"==i?(r=parseFloat(e.x1),n=parseFloat(e.y1),s=parseFloat(e.x2),l=parseFloat(e.y2),c="L(",c+=r+", ",c+=n+", ",c+=s+", ",c+=l+")"):(r=a.getBBox().x+a.getBBox().width/2+e.cx/10,n=a.getBBox().y+a.getBBox().height/2+e.cy/10,m=a.getBBox().x+a.getBBox().width/2+parseFloat(e.fx),h=a.getBBox().y+a.getBBox().height/2+parseFloat(e.fy),c="R(",c+=r+", ",c+=n+", ",c+=e.r+", ",c+=m+", ",c+=h+")"),d=0;d<e.stop.length;d+=1)u=o(e.stop[d].stopColor),c+="rgba("+u.r+","+u.g+","+u.b+","+e.stop[d].stopOpacity+")",c+=":",c+=e.stop[d].offset,d!==e.stop.length-1&&(c+="-");return p=t.el.paper.gradient(c)},this.addFill=function(t,e){var i,a,r,n,o;e.color&&(i=l.getFillColor(e),t.attr({fill:i})),e.image&&(n=e.image,a=l.getFillImage(n),t.attr({fill:a})),e.linearGradient&&(o=e.linearGradient,r=l.getFillGradient(o,"linear"),t.attr({fill:r})),e.radialGradient&&(o=e.radialGradient,r=l.getFillGradient(o,"radial",t),t.attr({fill:r}))},this.addStroke=function(t,e){var i,a,r,n,o;e.color&&(clr=e.color,i=parseInt(clr.substring(1,3),16),a=parseInt(clr.substring(3,5),16),r=parseInt(clr.substring(5,7),16),n=e.colorOpacity,o="rgba("+i+","+a+","+r+","+n+")",t.attr({stroke:o,strokeWidth:e.strokeWidth}))},this.create()},MovieClip=function(t,e,i,a,r,n){var o,s;parentEl="svg"==e.type?e:e.el,a&&(this.id=a),r&&(this.name=r),this.el=parentEl.g(),this.el.attr({"class":"movieclip",token:this.id}),this.transform=n,this.m_timeline=t,this.m_currentFrameNo=0,this.m_frameCount=this.m_timeline.frameCount,this._scripts={},this._labels=[],this.children=[],this.isMask=!1,this.isMasked=!1,this.mask=null,this.maskElement=null,this.maskTill=null,this.loops=!0,this.playing=!0,this.resourceManager=i,this.commandList=[],this.matrix=new Snap.Matrix,"undefined"!=typeof this.m_timeline.Label&&(this._labels=this.m_timeline.Label),void 0!==this.transform&&(o=this.transform,s=o.split(","),this.matrix=new Snap.Matrix(s[0],s[1],s[2],s[3],s[4],s[5]),this.el.transform(this.matrix))};MovieClip.prototype.addChild=function(t,e){e=e?e:0,this.insertAtIndex(t,e)},MovieClip.prototype._addChild=function(t,e){if(t.name&&(this[t.name]=t),e&&0!==parseInt(e)){var i=this.getChildById(parseInt(e));i.isMasked?i.el.parent().before(t.el):i.el.before(t.el)}else this.el.add(t.el)},MovieClip.prototype.getChildById=function(t){var e;for(e=0;e<this.children.length;e+=1)if(this.children[e].id==t)return this.children[e];return!1},MovieClip.prototype.getChildIndexById=function(t){var e;for(e=0;e<this.children.length;e+=1)if(this.children[e].id==t)return e;return!1},MovieClip.prototype.removeChildById=function(t){var e;for(e=0;e<this.children.length;e+=1)if(this.children[e].id==t)return void this.children.splice(e,1)},MovieClip.prototype.swapChildIndex=function(t,e){var i,a;for(i=0;i<this.children.length;i+=1)if(this.children[i].id==t){a=this.children.splice(i,1);break}for(i=0;i<this.children.length;i+=1)if(this.children[i].id==e){this.children.splice(i+1,0,a[0]);break}},MovieClip.prototype.insertAtIndex=function(t,e){var i;for(this._addChild(t,e),0===parseInt(e)&&this.children.unshift(t),i=0;i<this.children.length;i+=1)if(this.children[i].id==e){this.children.splice(i+1,0,t);break}},MovieClip.prototype.containsMask=function(){var t;for(t=0;t<this.children.length;t+=1)if(this.children[t].isMask)return!0;return!1},MovieClip.prototype.getFrameLabels=function(){return this._labels},MovieClip.prototype.getMatrix=function(){return this.matrix?this.matrix:new Snap.Matrix},MovieClip.prototype.getX=function(){var t=0;return this.matrix&&(t=this.matrix.x()),t},MovieClip.prototype.getY=function(){var t=0;return this.matrix&&(t=this.matrix.y()),t},MovieClip.prototype.mouseover=function(t){this.el.mouseover(t)},MovieClip.prototype.mouseout=function(t){this.el.mouseout(t)},MovieClip.prototype.mousedown=function(t){this.el.mousedown(t)},MovieClip.prototype.mousemove=function(t){this.el.mousemove(t)},MovieClip.prototype.click=function(t){this.el.click(t)},MovieClip.prototype.executeFrameScript=function(script){eval("(function () {"+script+"}).call(this);")},MovieClip.prototype.removeFrameScript=function(t){delete this._scripts[t]},MovieClip.prototype.addFrameScript=function(t,e){this._scripts[t]=e},MovieClip.prototype.getFrame=function(t){var e;for(e=0;e<this.m_timeline.Frame.length;e+=1)if(this.m_timeline.Frame[e].num==t)return this.m_timeline.Frame[e]},MovieClip.prototype._checkLoop=function(){if(this.m_currentFrameNo==this.m_frameCount){if(!this.loops)return;this._loop()}},MovieClip.prototype._loop=function(){var t,e,i,a,r;if(this.m_currentFrameNo=0,t=this.getFrame(this.m_currentFrameNo),!t)return void this.clearChildren();for(e=t.Command,i=0;i<this.children.length;i+=1){for(a=!1,child=this.children[i],c=0;c<e.length;++c)if(cmdData=e[c],r=cmdData.cmdType,"Place"==r&&parseInt(child.id)==parseInt(cmdData.objectId)){a=!0;break}a===!1&&(command=new CMD.RemoveObjectCommand(child.id),this.commandList.push(command))}},MovieClip.prototype.clearChildren=function(){var t,e,i;for(t=0;t<this.children.length;t+=1)e=this.children[t],i=new CMD.RemoveObjectCommand(e.id),this.commandList.push(i)},MovieClip.prototype._animate=function(){var t;for(this.step_1_animTimeline(),this.step_2_enterFrame(),this.step_4_frameletructed(),this.step_5_frameScripts(),this.step_6_exitFrame(),t=0;t<this.children.length;t+=1)this.children[t]._animate&&this.children[t]._animate();GP.purge()},MovieClip.prototype._runCommands=function(t){var e,i,a,r,n;for(e=0;e<t.length;e+=1)switch(i=t[e],r=i.cmdType,a=null,r){case"Place":n=this.getChildById(i.objectId),n?(a=new CMD.MoveObjectCommand(i.objectId,i.transformMatrix),this.commandList.push(a),a=new CMD.UpdateObjectCommand(i.objectId,i.placeAfter),this.commandList.push(a)):(a=new CMD.PlaceObjectCommand(i.charid,i.objectId,i.name,i.placeAfter,i.transformMatrix,i.bounds),this.commandList.push(a));break;case"Move":a=new CMD.MoveObjectCommand(i.objectId,i.transformMatrix),this.commandList.push(a);break;case"Remove":a=new CMD.RemoveObjectCommand(i.objectId),this.commandList.push(a);break;case"UpdateZOrder":a=new CMD.UpdateObjectCommand(i.objectId,i.placeAfter),this.commandList.push(a);break;case"UpdateVisibility":a=new CMD.UpdateVisibilityCommand(i.objectId,i.visibility),this.commandList.push(a);break;case"UpdateColorTransform":a=new CMD.UpdateColorTransformCommand(i.objectId,i.colorMatrix),this.commandList.push(a);break;case"UpdateBlendMode":break;case"UpdateMask":a=new CMD.UpdateMaskCommand(i.objectId,i.maskTill),this.commandList.push(a);break;case"AddFrameScript":a=new CMD.AddFrameScriptCommand(i.scriptId,i.script),this.commandList.push(a);break;case"RemoveFrameScript":a=new CMD.RemoveFrameScriptCommand(i.scriptId),this.commandList.push(a);break;case"SetFrameLabel":a=new CMD.SetFrameLabelCommand(i.Name),this.commandList.push(a)}this.containsMask&&(a=new CMD.ApplyMaskCommand,this.commandList.push(a)),this.executeCommands(this.commandList,this.resourceManager)},MovieClip.prototype.step_1_animTimeline=function(t,e){"undefined"==typeof t&&(t=!1),"undefined"==typeof e&&(e=!1);var i,a;this.playing&&(this.commandList=[],this._checkLoop(),a=this.getFrame(this.m_currentFrameNo),this.m_currentFrameNo++,a&&(i=a.Command,this._runCommands(i)))},MovieClip.prototype.step_2_enterFrame=function(){},MovieClip.prototype.step_3_addPending=function(){},MovieClip.prototype.step_4_frameletructed=function(){},MovieClip.prototype.step_5_frameScripts=function(){for(var t in this._scripts)this.executeFrameScript(this._scripts[t])},MovieClip.prototype.step_6_exitFrame=function(){},MovieClip.prototype.play=function(){this.playing=!0},MovieClip.prototype.stop=function(){this.playing=!1},MovieClip.prototype.gotoAndStop=function(t){this._gotoAndPlayStop(t,!0)},MovieClip.prototype.gotoAndPlay=function(t){this._gotoAndPlayStop(t,!1)},MovieClip.prototype._gotoAndPlayStop=function(t,e){if("string"==typeof t){for(var i=this.getFrameLabels(),a=!1,r=i.length-1;r>=0;r--)if(t===i[r].name){t=parseInt(i[r].frameNum)+1,a=!0;break}if(a===!1)return}if(!(1>t||t>this.m_frameCount)){if(t==this.m_currentFrameNo)return void(e===!1?this.play():this.stop());if(this.play(),t<this.m_currentFrameNo){var n=1==t;this._loopAround(!0,n)}for(;this.m_currentFrameNo<t;){var n=t==this.m_currentFrameNo;this.step_1_animTimeline(!0,n);for(var r=0;r<this.children.length;r+=1)this.children[r].step_1_animTimeline&&this.children[r].step_1_animTimeline(!0,n)}e===!1?this.play():this.stop(),this.step_4_frameletructed(),this.step_5_frameScripts(),this.step_6_exitFrame()}},MovieClip.prototype._loopAround=function(t,e){"undefined"==typeof t&&(t=!1),"undefined"==typeof e&&(e=!1),this.commandList=[],this._checkLoop(),this.m_currentFrameNo=0,frame=this.getFrame(this.m_currentFrameNo),frame&&(commands=frame.Command,this._runCommands(commands))},MovieClip.prototype.executeCommands=function(t,e){var i;for(i=0;i<t.length;i++)void 0!==t[i]&&t[i].execute(this,e)},MovieClip.prototype.log=function(){if(this.id.indexOf("svg")>-1){var t=Array.prototype.slice.call(arguments);t.unshift(this.id.toUpperCase())}};var CMD={};CMD.PlaceObjectCommand=function(t,e,i,a,r,n){this.m_charID=t,this.m_objectID=e,this.m_name=i,this.m_placeAfter=a,this.m_transform=r,this.m_bounds=n},CMD.PlaceObjectCommand.prototype.execute=function(t,e){var i,a,r,n,o,s=e.getShape(this.m_charID),l=e.getBitmap(this.m_charID),m=e.getText(this.m_charID);null!==s&&void 0!==s?(a=new Shape(t,e,this.m_charID,this.m_objectID,this.m_placeAfter,this.m_transform),t.insertAtIndex(a,this.m_placeAfter)):null!==l&&void 0!==l?(r=new Bitmap(t,e,this.m_charID,this.m_objectID,this.m_placeAfter,this.m_transform),t.insertAtIndex(r,this.m_placeAfter)):null!==m&&void 0!==m?(i=new Text(t,e,this.m_charID,this.m_objectID,this.m_placeAfter,this.m_transform,this.m_bounds),t.insertAtIndex(i,this.m_placeAfter)):(n=e.getMovieClip(this.m_charID),n&&(o=new MovieClip(n,t,e,this.m_objectID,this.m_name,this.m_transform),t.insertAtIndex(o,this.m_placeAfter),o.play()))},CMD.MoveObjectCommand=function(t,e){this.m_objectID=t,this.m_transform=e},CMD.MoveObjectCommand.prototype.execute=function(t){var e,i,a;e=this.m_transform,i=e.split(","),a=new Snap.Matrix(i[0],i[1],i[2],i[3],i[4],i[5]),child=t.getChildById(this.m_objectID),child.matrix=a,child.el.transform(a)},CMD.UpdateObjectCommand=function(t,e){this.m_objectID=t,this.m_placeAfter=e},CMD.UpdateObjectCommand.prototype.execute=function(){},CMD.RemoveObjectCommand=function(t){this.m_objectID=t},CMD.RemoveObjectCommand.prototype.execute=function(t){var e;e=t.getChildById(this.m_objectID),e.el.remove(),t.removeChildById(this.m_objectID)},CMD.UpdateVisibilityCommand=function(t,e){this.m_objectID=t,this.m_visibility=e},CMD.UpdateVisibilityCommand.prototype.execute=function(t){var e,i;e=t.getChildById(this.m_objectID),i="true"==this.m_visibility?"visible":"hidden",e.el.attr({visibility:i})},CMD.UpdateMaskCommand=function(t,e){this.m_objectID=t,this.m_maskTill=e},CMD.UpdateMaskCommand.prototype.execute=function(t){var e,i;maskContent=t.getChildById(this.m_objectID),maskContent.isMask=!0,maskContent.maskTill=this.m_maskTill,e=t.el.mask(),e.attr("mask-type","alpha"),clone=maskContent.el.clone(),clone.attr({visibility:"visible"}),i=e.toDefs(),i.append(clone),maskContent.maskElement=i,maskContent.el.attr({visibility:"hidden"})},CMD.ApplyMaskCommand=function(){},CMD.ApplyMaskCommand.prototype.execute=function(t){var e,i,a=!1,r=null,n=null,o=null;for(e=0;e<t.children.length;e+=1)child=t.children[e],child.isMask?(updateMaskContent(t,child),a=!0,r=child,n=child.maskElement,o=child.maskTill,i=t.el.g(),i.attr({"class":"maskGroup"}),child.el.after(i),i.attr({mask:n}),GP.addEmpty(i),GP.addRef(n,[i]),child.id==child.maskTill&&(a=!1)):a&&(i.prepend(child.el),child.isMasked=!0,child.mask=r.id,child.id==o&&(a=!1,r=null,o=null))},CMD.UpdateColorTransformCommand=function(t,e){this.m_objectID=t,this.m_colorMatrix=e},CMD.UpdateColorTransformCommand.prototype.execute=function(t){var e,i;e=t.getChildById(this.m_objectID),i=this.m_colorMatrix.split(",",7),e.el.attr({opacity:parseFloat(i[6])})},CMD.AddFrameScriptCommand=function(t,e){this.m_scriptID=t,this.m_script=e},CMD.AddFrameScriptCommand.prototype.execute=function(t){t.addFrameScript(this.m_scriptID,this.m_script)},CMD.RemoveFrameScriptCommand=function(t){this.m_scriptID=t},CMD.RemoveFrameScriptCommand.prototype.execute=function(t){t.removeFrameScript(this.m_scriptID)},CMD.SetFrameLabelCommand=function(t){this.m_labelName=t},CMD.SetFrameLabelCommand.prototype.execute=function(){};var ResourceManager=function(t){var e;this.m_shapes=[],this.m_movieClips=[],this.m_bitmaps=[],this.m_text=[],this.m_data=t;for(var i=0;i<this.m_data.DOMDocument.Shape.length;i++){e=this.m_data.DOMDocument.Shape[i].charid;var a=this.m_data.DOMDocument.Shape[i];this.m_shapes[e]=a}for(var r=0;r<this.m_data.DOMDocument.Bitmaps.length;r++){e=this.m_data.DOMDocument.Bitmaps[r].charid;var n=this.m_data.DOMDocument.Bitmaps[r];this.m_bitmaps[e]=n}for(var o=0;o<this.m_data.DOMDocument.Text.length;o++){e=this.m_data.DOMDocument.Text[o].charid;var s=this.m_data.DOMDocument.Text[o];this.m_text[e]=s}if(void 0!==this.m_data.DOMDocument.Timeline)for(var l=0;l<this.m_data.DOMDocument.Timeline.length-1;l++){e=this.m_data.DOMDocument.Timeline[l].charid;var m=this.m_data.DOMDocument.Timeline[l];this.m_movieClips[e]=m}};return ResourceManager.prototype.getShape=function(t){return this.m_shapes[t]},ResourceManager.prototype.getMovieClip=function(t){return this.m_movieClips[t]},ResourceManager.prototype.getBitmap=function(t){return this.m_bitmaps[t]},ResourceManager.prototype.getText=function(t){return this.m_text[t]},window.SVGAnim=SVGAnim,SVGAnim}(window||this);